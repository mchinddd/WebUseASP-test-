@model WebUseASP_test_.Models.User
@{
    ViewData["Title"] = "Chỉnh sửa người dùng";
    Layout = "_Layout";
}

@section Styles {
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="~/css/admin.css" />
}

<div class="container mt-4">
    <h2>Chỉnh sửa người dùng</h2>
    <hr />

    @if (TempData["ErrorMessage"] != null)
    {
        <div class="alert alert-danger">@TempData["ErrorMessage"]</div>
    }

    <form asp-action="EditUser" method="post">
        <input type="hidden" asp-for="UserID" />

        <div class="mb-3">
            <label asp-for="Username" class="form-label">Tài khoản</label>
            <input asp-for="Username" class="form-control" />
        </div>

        <div class="mb-3">
            <label asp-for="FullName" class="form-label">Họ và tên</label>
            <input asp-for="FullName" class="form-control" />
        </div>

        <div class="mb-3">
            <label asp-for="Email" class="form-label">Email</label>
            <input asp-for="Email" type="email" class="form-control" />
        </div>

        <div class="mb-3">
            <label asp-for="Phone" class="form-label">Số điện thoại</label>
            <input asp-for="Phone" class="form-control" />
        </div>

        <div class="mb-3">
            <label asp-for="RoleID" class="form-label">Vai trò</label>
            <select asp-for="RoleID" class="form-select">
                <option value="1" selected="@Model.RoleID==1">Admin</option>
                <option value="2" selected="@Model.RoleID==2">Giáo viên</option>
                <option value="3" selected="@Model.RoleID==3">Học sinh</option>
            </select>
        </div>

        <div class="mb-3 form-check">
            <input asp-for="IsActive" class="form-check-input" type="checkbox" />
            <label asp-for="IsActive" class="form-check-label">Hoạt động</label>
        </div>

        <!-- Nếu là giáo viên -->
        @if (Model.RoleID == 2 && Model.Teacher != null)
        {
            <h5>Thông tin giáo viên</h5>
            <div class="mb-3">
                <label asp-for="Teacher.TeacherCode" class="form-label">Mã giáo viên</label>
                <input asp-for="Teacher.TeacherCode" class="form-control" />
            </div>
            <div class="mb-3">
                <label asp-for="Teacher.Department" class="form-label">Khoa/Phòng ban</label>
                <input asp-for="Teacher.Department" class="form-control" />
            </div>
            <div class="mb-3">
                <label asp-for="Teacher.Specialization" class="form-label">Chuyên môn</label>
                <input asp-for="Teacher.Specialization" class="form-control" />
            </div>
        }

        <!-- Nếu là học sinh -->
        @if (Model.RoleID == 3 && Model.Student != null)
        {
            <h5>Thông tin học sinh</h5>
            <div class="mb-3">
                <label asp-for="Student.StudentCode" class="form-label">Mã học sinh</label>
                <input asp-for="Student.StudentCode" class="form-control" />
            </div>
            <div class="mb-3">
                <label asp-for="Student.DateOfBirth" class="form-label">Ngày sinh</label>
                <input asp-for="Student.DateOfBirth" type="date" class="form-control" />
            </div>
            <div class="mb-3">
                <label asp-for="Student.Gender" class="form-label">Giới tính</label>
                <select asp-for="Student.Gender" class="form-select">
                    <option value="Female" selected="@Model.Student.Gender==" Female"">Female</option>
                    <option value="Male" selected="@Model.Student.Gender==" Male"">Male</option>
                    <option value="Other" selected="@Model.Student.Gender==" Other"">Other</option>
                </select>
            </div>
            <div class="mb-3">
                <label asp-for="Student.Address" class="form-label">Địa chỉ</label>
                <input asp-for="Student.Address" class="form-control" />
            </div>
            <div class="mb-3">
                <label asp-for="Student.ClassID" class="form-label">Lớp</label>
                <input asp-for="Student.ClassID" class="form-control" />
            </div>
        }

        <button type="submit" class="btn btn-primary">Lưu thay đổi</button>
        <a asp-action="Users" class="btn btn-secondary">Hủy</a>
    </form>
</div>
